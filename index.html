<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>코인 차트 데모 - 1시간봉 + 평단 표시</title>
  <link rel="stylesheet" href="./style.css" />
  <!-- Lightweight Charts CDN -->
  <script src="https://cdn.jsdelivr.net/npm/lightweight-charts@4.1.1/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
  <div class="wrap">
    <header class="topbar">
      <h1>코인 차트 (1시간봉)</h1>
      <div class="actions">
        <select id="symbol">
          <option value="BTCUSDT">BTC/USDT</option>
          <option value="ETHUSDT">ETH/USDT</option>
          <option value="SOLUSDT">SOL/USDT</option>
          <option value="XRPUSDT">XRP/USDT</option>
          <option value="DOGEUSDT">DOGE/USDT</option>
        </select>
        <button id="refresh">새로고침</button>
      </div>
    </header>

    <main class="main">
      <section class="left">
        <div id="chart" class="chart"></div>
        <div class="range-buttons">
          <button data-limit="72">3일</button>
          <button data-limit="168" class="active">1주</button>
          <button data-limit="720">1달</button>
          <button data-limit="1440">2달</button>
          <button data-limit="2000">최대</button>
        </div>
      </section>

      <aside class="right">
        <div class="card">
          <h2>평단 / 포지션</h2>
          <label>평단가(Avg) <input id="avgPrice" type="number" step="0.0001" placeholder="예: 57200" /></label>
          <label>수량(Size) <input id="size" type="number" step="0.0001" placeholder="예: 0.25" /></label>
          <div class="row">
            <button id="save">저장</button>
            <button id="clear">초기화</button>
          </div>
          <p class="help">코인/심볼별로 자동 저장됩니다 (브라우저 로컬 저장소).</p>
        </div>

        <div class="card">
          <h2>현재가/손익</h2>
          <div class="stat"><span>현재가</span><strong id="lastPrice">-</strong></div>
          <div class="stat"><span>평단가</span><strong id="avgPriceView">-</strong></div>
          <div class="stat"><span>수량</span><strong id="sizeView">-</strong></div>
          <hr />
          <div class="stat big">
            <span>평가손익 (미실현)</span>
            <strong id="pnl">-</strong>
          </div>
          <div class="stat">
            <span>수익률</span><strong id="roe">-</strong>
          </div>
        </div>

        <div class="card">
          <h2>표시 옵션</h2>
          <label class="checkbox">
            <input type="checkbox" id="showAvgLabel" checked />
            <span>차트에 평단 라벨 표시</span>
          </label>
          <label class="checkbox">
            <input type="checkbox" id="showLastLine" checked />
            <span>현재가 라인 표시</span>
          </label>
        </div>

        <div class="card">
          <h2>도움말</h2>
          <ul>
            <li>모든 차트는 <b>1시간봉</b>으로 표시됩니다.</li>
            <li>평단가가 저장되면 차트 우측 가격축에 <b>Avg: 값</b> 라벨이 뜹니다.</li>
            <li>모바일/데스크탑 반응형 레이아웃입니다.</li>
          </ul>
        </div>
      </aside>
    </main>

    <footer class="footer">
      <span>데모 | Binance 1h 캔들 (공개 API)</span>
      <a href="https://github.com/tradingview/lightweight-charts" target="_blank" rel="noreferrer">Lightweight Charts</a>
    </footer>
  </div>

  <script src="./app.js"></script>
</body>
</html>
